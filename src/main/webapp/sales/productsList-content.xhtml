<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:custom="http://ddd-cqrs-sample.org/facelets">

    <div class="productsListContent">
        <h1>products available</h1>
        <div class="productsContent">
            <p>Choose from our wide range of quality products</p>
            <div>
                <h3>show only products</h3>
                <h:form class="filterProductsForm">
                    <h:outputText value="containing text:" />
                    <h:inputText name="containsText" value="${products.containsTextFilter}" />
                    <br />
                    <h:outputText value="up to price:" />
                    <h:inputText name="maxPrice" value="#{products.maxPriceFilter}" />
                    <h:outputText value="EUR" />
                    <br />
                    <h:commandButton value="filter" action="${products.doFilter}"/>
                    <h:commandButton value="show all" action="${products.clearFilter}" />
                </h:form>
            </div>

            <p>${products.totalItemsCount} products found</p>


            <h:dataTable  value="#{products.items}"
                          id="productsTable" class="dataTable"
                          headerClass="priceColumn"
                          columnClasses="imageColumn, productNameColumn, priceColumn, buttonColumn"
                          var="product"
                          sortedby="${products.sortedBy}"
                          ascending="$products.isAscending}"
                    >

                <h:column class="imageColumn">
                    <f:facet name="header"></f:facet>
                    <img class="productImage"
                         src="../static/img/sales/noProductPicture.png" alt="no product"/>
                </h:column>

                <h:column class="productNameColumn">
                    <f:facet name="header">
                        <h:form>
                            <h:commandLink value="Product name" action="${products.sortByName}"/>
                        </h:form>
                    </f:facet>
                    ${product.displayedName}</h:column>

                <h:column class="priceColumn">
                    <f:facet name="header">
                        <h:form>
                            <h:commandLink value="Price" action="${products.sortByPrice}"/>
                        </h:form>

                    </f:facet>
                    ${product.price}</h:column>

                <h:column class="buttonsColumn">
                    <h:form>
                        <h:commandButton value="add" type="submit"
                                         action="#{products.addToOrder}">
                            <f:param name="productId" value="${product.productId}" />
                        </h:commandButton>
                    </h:form>
                </h:column>
            </h:dataTable>
            <custom:pagination results="${products}" />
            <!--
           <h:table id="productsTable" class="dataTable">
                   <h:thead>
                           <h:tr>
                                   <h:td class="imageColumn"></h:td>
                                   <h:td class="productNameColumn sortable">product name</h:td>
                                   <h:td class="priceColumn sortable">price</h:td>
                                   <h:td class="buttonsColumn"></h:td>
                           </tr>
                   </thead>
                   <tbody>
                           <c:forEach items="${products.items}" var="product">
                                   <tr>
                                           <td class="imageColumn"><img class="productImage"
                                                   src="<c:url value="/static/img/sales/noProductPicture.png "/>" />
                                           </td>
                                           <td class="productNameColumn"><c:out
                                                           value="${product.displayedName}" />
                                           </td>
                                           <td class="priceColumn"><c:out value="${product.price}" />
                                           </td>
                                           <td class="buttonsColumn"><input name="addProductButton"
                                                   type="button" value="add" productId="${product.productId}" /></td>
                                   </tr>
                           </c:forEach>
                   </tbody>
           </table>
           <custom:pagination results="${products}" />
   </div>
</div>

<div class="basketContainer">
   <div class="highlight">
           <h1>your basket</h1>
   </div>

   <div class="basketContent" style="display: none;">
           <ul id="basketItemsList">
           </ul>

           <div class="basketControls">
                   <div>
                           <form action="checkout" method="post">
                                   <input type="submit" value="checkout" />
                           </form>
                   </div>
                   <div>
                           <button onclick="clearBasket()">clear basket</button>
                   </div>
           </div> -->
        </div>
        <div class="basketNoContent" style="display: none;">
            <p class="notification">your basket is empty</p>
        </div>
    </div>

</ui:composition>